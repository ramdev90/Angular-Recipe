import{b as D}from"./chunk-7OU34OZJ.js";import{A as L,Aa as J,B as b,C as u,E as A,F as E,G as F,H as _,I as l,K as S,O as V,P as I,Y as R,aa as N,ca as T,ea as j,fa as q,ha as P,ja as Q,ka as k,l as y,n as w,o as x,p as h,q as g,qa as H,ra as O,s as a,sa as U,t as c,u as M,v,va as G,w as p,x as s,xa as z,y as r,ya as B,z as d,za as f}from"./chunk-2UBTGTCX.js";function X(o,C){}function Y(o,C){o&1&&(s(0,"div",6),d(1,"app-loading-spinner"),r())}function Z(o,C){if(o&1){let t=L();s(0,"form",7,0),b("ngSubmit",function(){h(t);let i=_(1),n=u();return g(n.onSubmit(i))}),s(2,"div",8)(3,"label",9),l(4,"E-Mail"),r(),d(5,"input",10),r(),s(6,"div",8)(7,"label",11),l(8,"Password"),r(),d(9,"input",12),r(),s(10,"div")(11,"button",13),l(12),r(),l(13," | "),s(14,"button",14),b("click",function(){h(t);let i=u();return g(i.onSwitchMode())}),l(15),r()()()}if(o&2){let t=_(1),e=u();a(11),p("disabled",!t.valid),a(),S(" ",e.isLoginMode?"Login":"Sign Up"," "),a(3),S(" Switch to ",e.isLoginMode?"Sign Up":"Login"," ")}}var K=(()=>{class o{constructor(t,e,i){this.authService=t,this.router=e,this.componentFactoryResolver=i,this.isLoginMode=!0,this.isLoading=!1,this.error=null}onSwitchMode(){this.isLoginMode=!this.isLoginMode}onSubmit(t){if(!t.valid)return;let e=t.value.email,i=t.value.password,n;this.isLoading=!0,this.isLoginMode?n=this.authService.login(e,i):n=this.authService.signup(e,i),n.subscribe(m=>{console.log(m),this.isLoading=!1,this.router.navigate(["/recipes"])},m=>{console.log(m),this.error=m,this.showErrorAlert(m),this.isLoading=!1}),t.reset()}onHandleError(){this.error=null}ngOnDestroy(){this.closeSub&&this.closeSub.unsubscribe()}showErrorAlert(t){let e=this.componentFactoryResolver.resolveComponentFactory(z),i=this.alertHost.viewContainerRef;i.clear();let n=i.createComponent(e);n.instance.message=t,this.closeSub=n.instance.close.subscribe(()=>{this.closeSub.unsubscribe(),i.clear()})}static{this.\u0275fac=function(e){return new(e||o)(c(D),c(R),c(M))}}static{this.\u0275cmp=w({type:o,selectors:[["app-auth"]],viewQuery:function(e,i){if(e&1&&A(f,5),e&2){let n;E(n=F())&&(i.alertHost=n.first)}},decls:5,vars:2,consts:[["authForm","ngForm"],["appPlaceholder",""],[1,"row"],[1,"col-xs-12","col-md-6","col-md-offset-3"],["style","text-align: center;",4,"ngIf"],[3,"ngSubmit",4,"ngIf"],[2,"text-align","center"],[3,"ngSubmit"],[1,"form-group"],["for","email"],["type","email","id","email","ngModel","","name","email","required","","email","",1,"form-control"],["for","password"],["type","password","id","password","ngModel","","name","password","required","","minlength","6",1,"form-control"],["type","submit",1,"btn","btn-primary",3,"disabled"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(e,i){e&1&&(v(0,X,0,0,"ng-template",1),s(1,"div",2)(2,"div",3),v(3,Y,2,0,"div",4)(4,Z,16,3,"form",5),r()()),e&2&&(a(3),p("ngIf",i.isLoading),a(),p("ngIf",!i.isLoading))},dependencies:[V,k,T,j,q,H,U,O,Q,P,f,B],encapsulation:2})}}return o})();var ue=(()=>{class o{static{this.\u0275fac=function(e){return new(e||o)}}static{this.\u0275mod=x({type:o})}static{this.\u0275inj=y({imports:[I,G,J,N.forChild([{path:"",component:K}])]})}}return o})();export{ue as a};
